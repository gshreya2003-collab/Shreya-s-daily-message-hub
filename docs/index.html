<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blessing Stone • Oracle</title>

  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #fbfaf8;
      --card: #ffffff;
      --ink: #2b2430;
      --accent: #d77e34;
      --deep: #3a2f5a;
      --muted: #8c8192;
      --soft-shadow: rgba(30,20,50,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0; padding:0}
    body{
      font-family: "Poppins", sans-serif;
      background: linear-gradient(180deg,#fbfaf8,#f7f4f9);
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .wrap{
      width:100%;
      max-width:820px;
      background:var(--card);
      border-radius:12px;
      padding:18px;
      box-shadow: 0 18px 40px var(--soft-shadow);
      border:1px solid rgba(30,20,40,0.03);
    }

    header{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    .logo{
      width:56px;height:56px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,#fffefc,#f4f1ff);
      font-family:"Merriweather", serif;
      font-size:24px;color:var(--deep);
    }
    h1{margin:0;font-family:"Merriweather",serif;font-size:18px;color:var(--deep)}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    .main { display:flex; gap:16px; align-items:flex-start; flex-wrap:wrap; }
    .left { flex:1 1 520px; min-width:260px; }
    .right { width:260px; min-width:220px; }

    .panel { background:var(--card); border-radius:10px; padding:14px; box-shadow:0 8px 26px var(--soft-shadow); border:1px solid rgba(120,100,160,0.02) }

    .stone-box { display:flex; gap:12px; align-items:center; }
    .stone-view {
      width:120px; height:120px; border-radius:14px;
      background:linear-gradient(180deg,#fff #f6f1ff);
      display:flex;align-items:center;justify-content:center;
      box-shadow: 0 10px 28px rgba(60,40,80,0.05);
      flex:0 0 120px;
    }
    .stone-core { width:80px;height:80px;border-radius:50%; display:flex;align-items:center;justify-content:center;
      font-family:"Merriweather", serif; color:var(--deep); font-weight:700; font-size:22px;
      background:linear-gradient(180deg,#fbf8ff,#efe6ff); box-shadow: inset 0 -6px 14px rgba(0,0,0,0.03);
    }

    .controls { margin-top:10px; display:flex; gap:8px; flex-wrap:wrap }
    .btn { background:var(--accent); color:#fff; padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:600 }
    .btn.ghost { background:transparent; color:var(--deep); border:1px solid rgba(40,30,60,0.06) }

    #result { margin-top:14px; min-height:140px; padding:14px; border-radius:10px; background:linear-gradient(180deg,#fff,#fbfbff); border:1px solid rgba(80,60,120,0.03); display:flex; align-items:center; justify-content:center; flex-direction:column; }
    .blessing { font-family:"Merriweather", serif; color:var(--deep); font-size:18px; line-height:1.45; text-align:center; margin:0; padding:0 8px; white-space:pre-wrap; }
    .meta { margin-top:10px; font-size:13px; color:var(--muted) }

    audio { width:100%; margin-top:8px; outline:none; }

    .sample { font-size:13px; color:var(--muted) }
    .preview-img { width:100%; border-radius:8px; box-shadow:0 8px 20px rgba(30,20,60,0.05); display:block; margin-top:8px; max-height:160px; object-fit:cover }

    footer { margin-top:12px; font-size:13px; color:var(--muted); text-align:center }

    /* responsive safety: allow scrolling if small screens */
    @media (max-width:760px) {
      body { padding:12px }
      .wrap { padding:12px }
      .right { width:100% }
      .main { flex-direction:column-reverse }
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <div class="logo">ॐ</div>
      <div>
        <h1>Blessing Stone • Oracle</h1>
        <p class="lead">Tap your stone to open this page. Each reveal shows a curated item — text, fortune, poem, quote, memory, image, or audio.</p>
      </div>
    </header>

    <div class="main">
      <div class="left panel">
        <div class="stone-box">
          <div class="stone-view" aria-hidden="true"><div class="stone-core">ॐ</div></div>
          <div style="flex:1">
            <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
              <button id="reveal" class="btn">Reveal Blessing</button>
              <button id="newOne" class="btn ghost">New Blessing</button>
              <button id="last" class="btn ghost">Show last</button>
            </div>
            <div class="meta" style="margin-top:8px">Tip: audio requires a tap of the play button on phones.</div>
            <div id="result" aria-live="polite">
              <div id="contentArea"><p style="color:var(--muted)">Your blessing will appear here.</p></div>
            </div>
          </div>
        </div>

        <div style="margin-top:12px;font-size:13px;color:var(--muted)">
          Edit content by updating the <code>items</code> array in the script below. For audio, use a direct MP3 URL.
        </div>
      </div>

      <aside class="right">
        <div class="panel sample">
          <div style="font-weight:600">Categories</div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:8px">
            <div style="padding:6px 8px;border-radius:8px;background:#fff9f2">Whimsical</div>
            <div style="padding:6px 8px;border-radius:8px;background:#f6fbf7">Nature</div>
            <div style="padding:6px 8px;border-radius:8px;background:#f8f7ff">Poem</div>
            <div style="padding:6px 8px;border-radius:8px;background:#fff9fb">Memory</div>
            <div style="padding:6px 8px;border-radius:8px;background:#fffdf6">Audio</div>
          </div>
          <img class="preview-img" src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=600&auto=format&fit=crop&ixlib=rb-4.0.3&s=4a5f0b3bd7b7b1fbe742d5f2db5a1b4f" alt="nature">
        </div>

        <div class="panel sample" style="margin-top:12px;text-align:center">
          <div style="font-weight:600">Site URL</div>
          <div id="siteurl" style="margin-top:8px;color:var(--deep);font-weight:600"></div>
        </div>
      </aside>
    </div>

    <footer>Built for your Blessing Stone • Edit items in the code to personalise content.</footer>
  </div>

  <script>
    /* ===== EDIT THIS ARRAY =====
       Supported types: text, fortune, poem, quote, memory, audio, image
       For audio/image use absolute direct URLs (mp3/jpg)
    */
    const items = [
      { type: "fortune", content: "A small kindness you send out will return to you twice over." },
      { type: "poem", content: "At dusk, the city softens — your quiet work is seen." },
      { type: "quote", content: "‘Courage blooms quietly, like a secret flower.’" },
      { type: "text", content: "A calm moment will arrive today; breathe into it." },
      { type: "memory", content: "Remember that walk by the water — let that stillness find you." }
      // Example audio:
      // { type: "audio", src: "https://docs.google.com/uc?export=download&id=YOUR_FILEID", label: "A soft voice" },
      // Example image:
      // { type: "image", src: "https://yourhost.com/img.jpg", label: "A small photo" },
    ];

    function pickRandomIdx(lastIdx){
      if(items.length===0) return -1;
      if(items.length===1) return 0;
      let i;
      do { i = Math.floor(Math.random() * items.length); } while(i===lastIdx);
      return i;
    }

    let lastIdx = null;

    function renderItem(i){
      const box = document.getElementById('contentArea');
      box.innerHTML = '';
      if(i < 0) { box.innerHTML = '<p style="color:var(--muted)">No blessings yet — add some in the items array.</p>'; return; }
      const it = items[i];
      if(it.type === 'audio'){
        const title = document.createElement('div'); title.className='meta'; title.innerText = it.label || 'Audio Blessing';
        const audio = document.createElement('audio'); audio.controls = true; audio.src = it.src; audio.setAttribute('playsinline',''); audio.setAttribute('preload','none');
        box.appendChild(title); box.appendChild(audio);
        const hint = document.createElement('div'); hint.className='meta'; hint.innerText = 'Tap play to hear the blessing.'; box.appendChild(hint);
      } else if(it.type === 'image'){
        const img = document.createElement('img'); img.src = it.src; img.alt = it.label || 'image'; img.style.maxWidth='100%'; img.style.borderRadius='8px';
        box.appendChild(img);
        if(it.label){ const cap = document.createElement('div'); cap.className='meta'; cap.innerText = it.label; box.appendChild(cap); }
      } else {
        const p = document.createElement('p'); p.className='blessing'; p.innerText = it.content; box.appendChild(p);
        const meta = document.createElement('div'); meta.className='meta'; meta.innerText = it.type.charAt(0).toUpperCase() + it.type.slice(1); box.appendChild(meta);
      }
    }

    document.getElementById('reveal').addEventListener('click', ()=>{
      const idx = pickRandomIdx(lastIdx); lastIdx = idx; renderItem(idx);
    });
    document.getElementById('newOne').addEventListener('click', ()=>{
      const idx = pickRandomIdx(lastIdx); lastIdx = idx; renderItem(idx);
    });
    document.getElementById('last').addEventListener('click', ()=>{ if(lastIdx!==null) renderItem(lastIdx); });

    (function(){ const site = location.origin + location.pathname.replace(/\/index\.html$/,''); document.getElementById('siteurl').innerText = site; })();

    // optional: auto-reveal when opened by NFC (commented because mobile audio autoplay blocks)
    // window.addEventListener('load', ()=> document.getElementById('reveal').click());
  </script>
</body>
</html>
