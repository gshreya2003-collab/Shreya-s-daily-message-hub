<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Daily Oracle</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-a: #C9D7FF;
    --bg-b: #FDE2FF;
    --bg-c: #F5E4FF;
    --card-bg: rgba(255,255,255,0.9);
    --ink: #2b2430;
    --muted:#6e6470;
    --accent: #7A5CFF;
  }

  html,body{
    height:100%; margin:0;
    font-family:Nunito, sans-serif;
    color:var(--ink);
  }

  body{
    background: linear-gradient(180deg,var(--bg-a),var(--bg-b),var(--bg-c));
    display:flex; align-items:center; justify-content:center;
    padding:20px;
  }

  .wrap{
    width:100%;
    max-width:900px;
    background:rgba(255,255,255,0.05);
    border-radius:16px;
    backdrop-filter: blur(6px);
    padding:26px;
    box-shadow:0 30px 80px rgba(50,40,90,0.2);
    position:relative;
  }

  /* sparkles */
  .sparkles{
    position:absolute; inset:0;
    pointer-events:none; z-index:1;
  }

  .sparkle{
    position:absolute; border-radius:50%;
    background:white;
    opacity:0;
  }

  @keyframes sparkleFloat {
    0%{transform:translateY(0) scale(.7); opacity:0;}
    20%{opacity:1;}
    50%{transform:translateY(-28px) scale(1);}
    100%{opacity:0;}
  }

  .content{
    position:relative; z-index:3;
    text-align:center;
  }

  .logo{
    font-family:"Playfair Display",serif;
    font-size:32px;
    color:var(--accent);
    margin-bottom:10px;
  }

  .subtitle{
    font-size:14px;
    color:var(--muted);
    margin-top:-6px;
    margin-bottom:18px;
  }

  .message-card{
    background:var(--card-bg);
    border-radius:14px;
    padding:20px;
    margin:0 auto;
    max-width:600px;
    box-shadow:0 18px 40px rgba(40,20,60,0.1);
  }

  .message-text{
    font-family:"Playfair Display",serif;
    font-size:20px;
    line-height:1.5;
  }

  .meta{
    font-size:12px;
    color:var(--muted);
    margin-top:8px;
  }

  .btn{
    margin-top:14px;
    background: linear-gradient(180deg,var(--accent), #ff77c7);
    border:0; 
    color:white; 
    padding:10px 16px;
    border-radius:12px;
    cursor:pointer;
    font-weight:700;
    font-size:14px;
    box-shadow:0 10px 25px rgba(100,50,200,0.2);
  }

  @media(max-width:600px){
    .message-text{font-size:18px;}
    .logo{font-size:28px;}
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="sparkles" id="sparkles"></div>

  <div class="content">
    <div class="logo">DAILY ORACLE</div>
    <div class="subtitle">A message appears each time you tap your pendant.</div>

    <div class="message-card">
      <div class="message-text" id="messageText">Loading...</div>
      <div class="meta" id="metaText"></div>
    </div>

    <button class="btn" id="anotherBtn">Show Another</button>
  </div>
</div>

<script>
/* YOUR GOOGLE WEB APP URL */
const SHEET_URL = "https://script.google.com/macros/s/AKfycbwGIgcHuKewvRfGCWb7S60e3NpmhmvGEpqjMvBhOsFXRxfJpv57MVbDRNWk0DKXeAgH/exec";

/* sparkle generator */
function makeSparkles(count=18){
  const box = document.getElementById("sparkles");
  box.innerHTML="";
  for(let i=0;i<count;i++){
    const s = document.createElement("div");
    s.className="sparkle";
    const size = 8 + Math.random()*14;
    s.style.width=size+"px";
    s.style.height=size+"px";
    s.style.left=(Math.random()*100)+"%";
    s.style.top=(Math.random()*100)+"%";
    s.style.opacity="0";
    const dur = (3+Math.random()*3).toFixed(2);
    const delay = (Math.random()*2).toFixed(2);
    s.style.animation=`sparkleFloat ${dur}s ease-in-out ${delay}s infinite`;
    box.appendChild(s);
  }
}

/* message handling */
let MESSAGES=[];

async function loadMessages(){
  try{
    const res = await fetch(SHEET_URL + "?cache=" + Date.now());
    const data = await res.json();
    if(Array.isArray(data)){
      MESSAGES=data;
    }
  } catch(e){
    MESSAGES=["Unable to load messages."];
  }
}

function pickMessage(){
  if(!MESSAGES || MESSAGES.length===0){
    document.getElementById("messageText").innerText="No messages available.";
    return;
  }
  const i=Math.floor(Math.random()*MESSAGES.length);
  document.getElementById("messageText").innerText=MESSAGES[i];
  document.getElementById("metaText").innerText=`Message ${i+1} of ${MESSAGES.length}`;
}

/* init */
window.addEventListener("DOMContentLoaded", async ()=>{
  makeSparkles();
  await loadMessages();
  pickMessage();
});

document.getElementById("anotherBtn").addEventListener("click", pickMessage);
</script>

</body>
</html>
